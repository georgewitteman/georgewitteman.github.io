<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Google Account Links Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="George Witteman">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <nav>
            <a href="/">&lsaquo; Home</a><br>
        </nav>
    </header>
      
    <main>
        <form id="form">
            <label>
                Google Email Address<br>
                <input type="email" name="email" id="email" autofocus placeholder="first.last@gmail.com">
            </label>
            <p>
                <output for="form" for="email" id="gmail"></output>
            </p> 
            <p>
                <output for="form" for="email" id="google_drive"></output>
            </p>
        </form>
        <script>
            const formElement = document.getElementById('form');
            const emailInputElement = document.getElementById('email');
            const gmailOutputElement = document.getElementById('gmail');
            const googleDriveOutputElement = document.getElementById('google_drive');

            function setOutputUrl(element, url) {
                const anchor = document.createElement("a");
                anchor.appendChild(document.createTextNode(url));
                anchor.href = url;
                element.replaceChildren(anchor);
            }

            formElement.addEventListener(
                'input',
                function() {
                    const email = emailInputElement.value;
                    if (!email) {
                        gmailOutputElement.value = "";
                        googleDriveOutputElement.value = "";
                        return;
                    }
                    setOutputUrl(gmailOutputElement, `https://mail.google.com/mail/u/${email}`);
                    setOutputUrl(googleDriveOutputElement, `https://drive.google.com/drive/u/${email}`);
                },
            );

            formElement.addEventListener(
                'submit',
                function(e) {
                    e.preventDefault();
                },
            );

        </script>
    </main>
</body>
</html>
